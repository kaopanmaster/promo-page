<!doctype html>
<html lang="th">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>โปรโมชัน</title>

<style>
  body{margin:0;background:#000;color:#fff;font-family:system-ui,sans-serif}
  .wrap{min-height:100dvh;display:grid;place-items:center;padding:16px}
  .card{width:min(460px,100%);background:rgba(20,20,20,.9);border-radius:16px;padding:16px}
  .hero{width:100%;border-radius:12px}
  .btn{display:block;width:100%;padding:14px 16px;margin-top:14px;border-radius:12px;border:0;font-weight:700}
  .btn-primary {
  background: linear-gradient(135deg, #2b002f, #000000);
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 10px 20px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(128, 0, 128, 0.5);
  transition: all 0.3s ease;
  letter-spacing: 0.5px;
}

.btn-primary:hover {
  background: linear-gradient(135deg, #5e0a75, #1a001a);
  box-shadow: 0 6px 14px rgba(160, 32, 240, 0.7);
  transform: translateY(-2px);
}

.btn-primary:active {
  background: linear-gradient(135deg, #400056, #000000);
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(128, 0, 128, 0.5);
}
 
  .muted{color:#cfcfcf;font-size:14px}
</style>

<body>
<div class="wrap">
  <div class="card">
    <img class="hero" src="https://tga168.ai/wp-content/uploads/2024/12/TGA168-Pronew-1-3-1024x1024.webp" alt="promo" />
    <p class="muted" style="margin:10px 6px 0">แชร์กิจกรรมตามกติกาเพื่อรับสิทธิ์</p>
    <button id="shareBtn" class="btn btn-primary">กดแชร์กิจกรรม</button>
  </div>
</div>

<!-- LIFF SDK -->
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
const LIFF_ID = "2008144040-YZrXRWvr"; // LIFF ของคุณ

// ---------- Flex (Carousel 2 bubble) ----------
function flexCarousel() {
  const bubble1 = {
    type: "bubble",
    size: "mega",
    hero: {
      type: "image",
      url: "https://tga168.ai/wp-content/uploads/2025/03/TGA-Board-pros-1-1024x1024.webp",
      size: "full",
      aspectRatio: "1:1",
      aspectMode: "cover",
      action: { type: "uri", uri: "https://line.me/" }
    },
"body": {
  "type": "box",
  "layout": "vertical",
  "paddingAll": "12px",
  "background": {
    "type": "linearGradient",
    "angle": "0deg",                     // 0 = ไล่สีจากล่างขึ้นบน
    "startColor": "#5e0a75",
    "centerColor": "#2b0035",
    "endColor": "#03011c",
    "centerPosition": "55%"
  },
  "contents": [
    { "type": "text", "text": "โปรฉลองยูสเซอร์ใหม่", "size": "xl", "color": "#EFFA11" },
    {
      "type": "box",
      "layout": "vertical",
      "margin": "lg",
      "spacing": "sm",
      "contents": [
        {
          "type": "box", "layout": "baseline", "spacing": "sm",
          "contents": [
            { "type": "icon", "url": "https://scdn.line-apps.com/n/channel_devcenter/img/fx/review_gold_star_28.png", "margin": "10px" },
            { "type": "text", "text": "ฝาก", "color": "#EFFA11", "size": "sm", "flex": 2, "weight": "bold" },
            { "type": "text", "text": "50 รับ 75", "color": "#FFFFFF", "size": "sm", "flex": 5, "wrap": true }
          ],
          "borderWidth": "2px", "borderColor": "#FFFFFF", "cornerRadius": "30px",
          "paddingAll": "5px", "backgroundColor": "#000000"
        },
        { "type": "box", "layout": "baseline", "spacing": "sm",
          "contents": [
            { "type": "icon", "url": "https://scdn.line-apps.com/n/channel_devcenter/img/fx/review_gold_star_28.png" },
            { "type": "text", "text": "ฝาก", "color": "#EFFA11", "size": "sm", "flex": 2, "weight": "bold" },
            { "type": "text", "text": "100 รับ 150", "color": "#FFFFFF", "size": "sm", "flex": 5, "wrap": true }
          ]
        },
        { "type": "box", "layout": "baseline", "spacing": "sm",
          "contents": [
            { "type": "icon", "url": "https://scdn.line-apps.com/n/channel_devcenter/img/fx/review_gold_star_28.png" },
            { "type": "text", "text": "ฝาก", "color": "#EFFA11", "size": "sm", "flex": 2, "weight": "bold" },
            { "type": "text", "text": "200 รับ 300", "color": "#FFFFFF", "size": "sm", "flex": 5, "wrap": true }
          ]
        },
        { "type": "box", "layout": "baseline", "spacing": "sm",
          "contents": [
            { "type": "icon", "url": "https://scdn.line-apps.com/n/channel_devcenter/img/fx/review_gold_star_28.png" },
            { "type": "text", "text": "ฝาก", "color": "#EFFA11", "size": "sm", "flex": 2, "weight": "bold" },
            { "type": "text", "text": "500 รับ 750", "color": "#FFFFFF", "size": "sm", "flex": 5, "wrap": true }
          ]
        }
      ]
    },
    {
      "type": "box", "layout": "baseline", "spacing": "sm", "paddingStart": "10px",
      "contents": [
        { "type": "icon", "url": "https://www.freeiconspng.com/uploads/new-flame-icon-png-12.png" },
        { "type": "text", "text": "ทำเทิร์น 4 เท่า ถอนได้ 3 เท่า", "color": "#EFFA11", "size": "sm", "weight": "bold" }
      ]
    }
  ]
},
    footer: {
      type: "box",
      layout: "vertical",
      spacing: "sm",
      contents: [
        { type: "button", style: "primary", height: "sm", color: "#7C3AED",
          action: { type: "uri", label: "สมัครสมาชิก", uri: "https://line.me/" } },
        { type: "button", style: "link", height: "sm", 
          action: { type: "uri", label: "ติดต่อเรา", uri: "https://line.me/" }, color: "#5EFF69" },
        { type: "box", layout: "vertical", contents: [], margin: "sm" }
      ]
    },
    styles: { body: { backgroundColor: "#0B0615" }, footer: { backgroundColor: "#5e0a75" } }
  };
}

// ---------- Init + กันตายเรื่อง token ----------
async function ensureReady() {
  await liff.init({ liffId: LIFF_ID });
  if (!liff.isLoggedIn()) { liff.login({ redirectUri: location.href }); return false; }
  if (!liff.getAccessToken()) { liff.logout(); liff.login({ redirectUri: location.href }); return false; }
  return true;
}

(async () => {
  const ok = await ensureReady();
  if (!ok) return;

  document.getElementById('shareBtn').addEventListener('click', async () => {
    try {
      if (!liff.isInClient()) { location.href = 'https://liff.line.me/' + LIFF_ID + location.search; return; }
      if (!liff.isApiAvailable('shareTargetPicker')) { alert('อุปกรณ์นี้ยังไม่รองรับการแชร์แบบเลือกห้อง'); return; }
      const res = await liff.shareTargetPicker([ flexCarousel() ]);
      if (res) { alert('แชร์สำเร็จ'); liff.closeWindow(); }
    } catch (err) { alert('แชร์ไม่สำเร็จ: ' + err.message); }
  });
})();
</script>
</body>
</html>
