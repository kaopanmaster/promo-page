<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
const LIFF_ID = "1661051007-qZ1jPaY3"; // ใช้ ID เดิมนี่แหละ

// Flex แบบคารูเซล 2 ใบ (แก้รูป/ลิงก์ตามต้องการ)
function flexCarousel(){
  return {
    type:"flex",
    altText:"โปรโมชันแจกทุน + เกมมาแรง",
    contents:{
      type:"carousel",
      contents:[
        {
          type:"bubble",
          size:"mega",
          hero:{ type:"image", url:"https://YOUR-CDN/promo-100.jpg", size:"full", aspectMode:"cover", aspectRatio:"20:13" },
          body:{ type:"box", layout:"vertical", contents:[
            { type:"text", text:"สมัครรับทันที 100", weight:"bold", size:"xl" },
            { type:"text", text:"ทำกติกาให้ครบ แล้วรับสิทธิ์ได้เลย", size:"sm", color:"#aaaaaa", wrap:true }
          ]},
          footer:{ type:"box", layout:"vertical", spacing:"md", contents:[
            { type:"button", style:"primary", action:{ type:"uri", label:"ร่วมกิจกรรม", uri:"https://liff.line.me/"+LIFF_ID } },
            { type:"button", style:"link", action:{ type:"uri", label:"เข้าสู่ระบบ", uri:"https://YOUR-DOMAIN/login" } }
          ]}
        },
        {
          type:"bubble",
          size:"mega",
          hero:{ type:"image", url:"https://YOUR-CDN/bonus-time.jpg", size:"full", aspectMode:"cover", aspectRatio:"20:13" },
          body:{ type:"box", layout:"vertical", contents:[
            { type:"text", text:"BONUS TIME", weight:"bold", size:"xl" },
            { type:"text", text:"ช่วงพีค อัตราเข้าฟีเจอร์ดีขึ้น", size:"sm", color:"#aaaaaa", wrap:true }
          ]},
          footer:{ type:"box", layout:"vertical", spacing:"md", contents:[
            { type:"button", style:"primary", action:{ type:"uri", label:"ทางเข้าเล่น", uri:"https://YOUR-DOMAIN/play" } },
            { type:"button", style:"link", action:{ type:"uri", label:"สมัครสมาชิก", uri:"https://YOUR-DOMAIN/register" } }
          ]}
        }
      ]
    }
  };
}

async function boot(){
  await liff.init({ liffId: LIFF_ID });
  if (!liff.isInClient() && !liff.isLoggedIn()) { liff.login(); return; }
  if (!liff.isApiAvailable('shareTargetPicker')) {
    alert('อุปกรณ์นี้ยังไม่รองรับการแชร์แบบเลือกห้อง'); 
  }
}
boot();

// ผูกกับปุ่มแชร์ของคุณ (เช่น id="shareBtn")
document.getElementById('shareBtn').addEventListener('click', async () => {
  try{
    const res = await liff.shareTargetPicker([ flexCarousel() ]);
    if (res) { alert('แชร์สำเร็จ!'); liff.closeWindow(); }
  }catch(e){ alert('แชร์ไม่สำเร็จ: '+e.message); }
});
</script>
